#+Title: Benchmarking "traits" via kernel module

Using the prototype-kernel (out-of-tree) time_bench framework for
micro-benchmarking "traits".

The feature under test is (currently) called "traits". It is a *compressed*
*key-value* *store*, that live in the top of the XDP packet data frame, just
after the struct =xdp_frame=.

* Generate: Table of Contents                                           :toc:
- [[#code-under-test][Code under test]]
  - [[#kernel-tree-and-branch-under-test][Kernel tree and branch under test]]
- [[#prototype-kernel][prototype-kernel]]
  - [[#basic-benchmark-module-for-traits][Basic benchmark module for traits]]
  - [[#build-and-push-commands][Build and push commands]]

* Code under test

** Kernel tree and branch under test

Tested on top of kernel tree and branch:
 - https://github.com/arthurfabre/linux/tree/afabre/traits-002-bounds-inline

* prototype-kernel

** Basic benchmark module for traits

https://github.com/netoptimizer/prototype-kernel/pull/48/commits

Module loading:
#+begin_src sh
modprobe bench_traits_simple
#+end_src

** Build and push commands

The build process is documented here:
 - https://prototype-kernel.readthedocs.io/en/latest/prototype-kernel/build-process.html

For convenience listing the commands I use here:

Building:
#+begin_src sh
  $ dirs
  ~/git/prototype-kernel/kernel
  $ make kbuilddir=~/git/kernel/arthur/ -j12
#+end_src

Pushing to remote host:
#+begin_src sh
make push_remote kbuilddir=~/git/kernel/arthur/ HOST=broadwell
#+end_src

